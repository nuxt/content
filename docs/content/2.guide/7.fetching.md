# Fetching

You can fetch content from the `content/` directory from any component or page of your application.
The `queryContent()` function is auto-imported by Nuxt Content to build queries with a MongoDB-like syntax.

## Usage

### Create a query builder

Create a new query builder with `queryContent()`. You can give a path as a parameter, starting at the root of your `content/` directory.

  ```js
  queryContent('/')
  ```

### Resolve the query

Resolve the query with one of these methods:

- `find()` will always return an array of one or more items corresponding to documents in the `content/` directory.

```js
/* returns every document found at the root (/) path of the content/ directory */
queryContent('/').find()
```

- `findOne()` will return an object corresponding to the matching document.

```js
/* returns only the matching index.md found at the root (/) path of the content/ directory*/
queryContent('/').findOne()
```

### UseAsyncData

Wrap your query in the `useAsyncData` composable (auto-imported as well).

```js
const { data: document } = await useAsyncData('home', () => {
  return queryContent('/').findOne()
})
```

::code-group

  ```vue [app.vue]
  <script setup>
  const { data: document } = await useAsyncData('home', () => {
    return queryContent('/').findOne()
  })
  </script>

  <template>
  <main>
    <pre>
      {{ document }}
    </pre>
  </main>
  </template>
  ```

  ```md [content/index.md]
    # Hello Content v2!

    Content V2 is a Git-based CMS
  ```

  ::code-block{label="Preview" preview}
    <pre>
    {
      "atime":"2022-04-27T13:44:32.242Z",
      "mtime":"2022-04-27T13:44:31.510Z",
      "size":20,
      "slug":"/",
      "draft":false,
      "partial":false,
      "empty":false,
      "title":"Hello Content V2!",
      "description":"",
      "body":{
        "type":"root",
        "children":[
          {
              "type":"element",
              "tag":"h1",
              "props":{
                "id":"hello-content-v2"
              },
              "children":[
                {
                    "type":"text",
                    "value":"Hello Content V2!"
                }
              ]
          }
        ],
        "toc":{
          "title":"",
          "searchDepth":2,
          "depth":2,
          "links":[]
        }
      },
      "type":"markdown",
      "id":"content:index.md",
      "source":"content",
      "path":"index",
      "extension":"md"
    }
    </pre>
  ::
::

## Querying

`queryContent()` supports methods chaining to create advanced queries. Once your query is ready, make sure to end your call with `.find()`, `.findOne()` or `.findSurround()` to effectively trigger data fetching.

::alert{type=info}
Discover every query methods in the [API reference](/api/query)
::

### Example

This example uses the `where()` and `only()` methods to fetch the title of the document corresponding to the current browser URL.

```vue
<script setup>
const route = useRoute()

const { data: document } = await useAsyncData(`content-${route.path}`, () => {
  return queryContent().where({ slug: route.path }).only(['title']).findOne()
})
</script>

<template>
  <main>
    <h1>{{ document.title }}</h1>
  </main>
</template>
```

::alert{type=info}
Play with editable [query examples](/examples/query)
::
